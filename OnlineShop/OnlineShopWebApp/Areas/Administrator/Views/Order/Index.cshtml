@model List<Order>

@{
	ViewData["Title"] = "Список заказов";
	int i = 1;
}

<div class="container">
	<div class="row">
		<div class="col-md-3">
			@await Html.PartialAsync("AdminMenu")
		</div>
		<div class="col-md-9">
			@if (Model == null || Model.Count == 0)
			{
				<h3>Список заказов пуст!</h3>
				<div class="text-start mt-3 cart-buttons">
					<div><a role="button" class="btn btn-primary" asp-controller="Home" asp-action="Index">Вернуться на главную страницу</a></div>
				</div>
			}
			else
			{
				<h3 class="section-title mb-3"><span>Список заказов</span></h3>
				<table class="table align-middle text-center table-hover">
					<thead class="table-dark">
						<tr>
							<th scope="col">№</th>
							<th scope="col">Имя покупателя</th>
							<th scope="col">Email</th>
							<th scope="col">Дата</th>
							<th scope="col">Сумма, р</th>
							<th scope="col">Статус</th>
							<th scope="col"><i class="fa-solid fa-pen-to-square"></i></th>
						</tr>
					</thead>
					<tbody>
						@foreach (var order in Model)
						{
							<tr>
								<td><a>@(i)</a></td>
								<td>@order.OrderDetails.Name</td>
								<td>@order.OrderDetails.Email</td>
								<td>@order.CreatedTime.ToString("dd:MM:yyyy-HH:mm")</td>
								<td><strong>@order.Cart.Cost()</strong></td>
								<td>@EnumHelper.GetDisplayName(@order.OrderStatus)</td>
								<td><a asp-controller="Order" asp-action="Details" asp-route-orderid="@order.Id" role="button" class="btn btn-primary">Подробнее</a></td>
							</tr>
							i++;
						}
					</tbody>
				</table>
			}
		</div>
	</div>
</div>
